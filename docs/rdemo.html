<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 GIS operations in R | A Minimal Introduction to GIS (in R)</title>
  <meta name="description" content="This is a minimal introduction to GIS and handling spatial data in R compiled for the Biological Sciences BSc(Honours) class at the University of Cape Town." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="7 GIS operations in R | A Minimal Introduction to GIS (in R)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal introduction to GIS and handling spatial data in R compiled for the Biological Sciences BSc(Honours) class at the University of Cape Town." />
  <meta name="github-repo" content="jslingsby/spatial-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 GIS operations in R | A Minimal Introduction to GIS (in R)" />
  
  <meta name="twitter:description" content="This is a minimal introduction to GIS and handling spatial data in R compiled for the Biological Sciences BSc(Honours) class at the University of Cape Town." />
  

<meta name="author" content="Jasper Slingsby" />


<meta name="date" content="2021-06-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-as-a-gis.html"/>
<link rel="next" href="references.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Intro to GIS in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#general"><i class="fa fa-check"></i><b>1.1</b> General</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#using-this-resource"><i class="fa fa-check"></i><b>1.2</b> Using this resource</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#module-and-project-details"><i class="fa fa-check"></i><b>1.3</b> Module and Project details</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Why care about GIS?</a></li>
<li class="chapter" data-level="3" data-path="gis-basics.html"><a href="gis-basics.html"><i class="fa fa-check"></i><b>3</b> GIS basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="gis-basics.html"><a href="gis-basics.html#what-is-gis"><i class="fa fa-check"></i><b>3.1</b> What is GIS?</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="gis-basics.html"><a href="gis-basics.html#an-example-workflow"><i class="fa fa-check"></i><b>3.1.1</b> An example workflow</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="gis-basics.html"><a href="gis-basics.html#how-do-we-do-gis"><i class="fa fa-check"></i><b>3.2</b> How do we do GIS?</a></li>
<li class="chapter" data-level="3.3" data-path="gis-basics.html"><a href="gis-basics.html#ucthelp"><i class="fa fa-check"></i><b>3.3</b> How to get help?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="gis-data-models-and-file-formats.html"><a href="gis-data-models-and-file-formats.html"><i class="fa fa-check"></i><b>4</b> GIS data models and file formats</a>
<ul>
<li class="chapter" data-level="4.1" data-path="gis-data-models-and-file-formats.html"><a href="gis-data-models-and-file-formats.html#data-models"><i class="fa fa-check"></i><b>4.1</b> Data models</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="gis-data-models-and-file-formats.html"><a href="gis-data-models-and-file-formats.html#vector-data"><i class="fa fa-check"></i><b>4.1.1</b> Vector data</a></li>
<li class="chapter" data-level="4.1.2" data-path="gis-data-models-and-file-formats.html"><a href="gis-data-models-and-file-formats.html#raster-data"><i class="fa fa-check"></i><b>4.1.2</b> Raster data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="gis-data-models-and-file-formats.html"><a href="gis-data-models-and-file-formats.html#attribute-data"><i class="fa fa-check"></i><b>4.2</b> Attribute data</a></li>
<li class="chapter" data-level="4.3" data-path="gis-data-models-and-file-formats.html"><a href="gis-data-models-and-file-formats.html#file-formats"><i class="fa fa-check"></i><b>4.3</b> File formats</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="some-important-concepts-and-pitfalls.html"><a href="some-important-concepts-and-pitfalls.html"><i class="fa fa-check"></i><b>5</b> Some important concepts and pitfalls</a>
<ul>
<li class="chapter" data-level="5.1" data-path="some-important-concepts-and-pitfalls.html"><a href="some-important-concepts-and-pitfalls.html#scale"><i class="fa fa-check"></i><b>5.1</b> Scale</a></li>
<li class="chapter" data-level="5.2" data-path="some-important-concepts-and-pitfalls.html"><a href="some-important-concepts-and-pitfalls.html#coordinate-reference-systems-crs"><i class="fa fa-check"></i><b>5.2</b> Coordinate Reference Systems (CRS)</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="some-important-concepts-and-pitfalls.html"><a href="some-important-concepts-and-pitfalls.html#geographic-or-unprojected-coordinate-systems"><i class="fa fa-check"></i><b>5.2.1</b> Geographic (or “unprojected”) Coordinate Systems</a></li>
<li class="chapter" data-level="5.2.2" data-path="some-important-concepts-and-pitfalls.html"><a href="some-important-concepts-and-pitfalls.html#projections"><i class="fa fa-check"></i><b>5.2.2</b> Projected Coordinate Systems</a></li>
<li class="chapter" data-level="5.2.3" data-path="some-important-concepts-and-pitfalls.html"><a href="some-important-concepts-and-pitfalls.html#projection-codes"><i class="fa fa-check"></i><b>5.2.3</b> Projection codes</a></li>
<li class="chapter" data-level="5.2.4" data-path="some-important-concepts-and-pitfalls.html"><a href="some-important-concepts-and-pitfalls.html#on-the-fly-vs-manual-projection"><i class="fa fa-check"></i><b>5.2.4</b> “On the fly” vs manual projection</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="some-important-concepts-and-pitfalls.html"><a href="some-important-concepts-and-pitfalls.html#the-golden-rules"><i class="fa fa-check"></i><b>5.3</b> The golden rules…</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-as-a-gis.html"><a href="r-as-a-gis.html"><i class="fa fa-check"></i><b>6</b> R as a GIS</a>
<ul>
<li class="chapter" data-level="6.1" data-path="r-as-a-gis.html"><a href="r-as-a-gis.html#overview-1"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="r-as-a-gis.html"><a href="r-as-a-gis.html#some-key-r-packages"><i class="fa fa-check"></i><b>6.2</b> Some key R packages</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="r-as-a-gis.html"><a href="r-as-a-gis.html#for-vector-data"><i class="fa fa-check"></i><b>6.2.1</b> For vector data</a></li>
<li class="chapter" data-level="6.2.2" data-path="r-as-a-gis.html"><a href="r-as-a-gis.html#for-raster-data"><i class="fa fa-check"></i><b>6.2.2</b> For raster data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rdemo.html"><a href="rdemo.html"><i class="fa fa-check"></i><b>7</b> GIS operations in R</a>
<ul>
<li class="chapter" data-level="7.1" data-path="rdemo.html"><a href="rdemo.html#casestudy"><i class="fa fa-check"></i><b>7.1</b> Case study and demo datasets</a></li>
<li class="chapter" data-level="7.2" data-path="rdemo.html"><a href="rdemo.html#working-with-vector-data"><i class="fa fa-check"></i><b>7.2</b> Working with vector data</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="rdemo.html"><a href="rdemo.html#reading-and-writing"><i class="fa fa-check"></i><b>7.2.1</b> Reading and writing</a></li>
<li class="chapter" data-level="7.2.2" data-path="rdemo.html"><a href="rdemo.html#basic-plotting"><i class="fa fa-check"></i><b>7.2.2</b> Basic plotting</a></li>
<li class="chapter" data-level="7.2.3" data-path="rdemo.html"><a href="rdemo.html#cropping"><i class="fa fa-check"></i><b>7.2.3</b> Cropping</a></li>
<li class="chapter" data-level="7.2.4" data-path="rdemo.html"><a href="rdemo.html#select-and-subset-by-attribute"><i class="fa fa-check"></i><b>7.2.4</b> Select and subset by attribute</a></li>
<li class="chapter" data-level="7.2.5" data-path="rdemo.html"><a href="rdemo.html#combine-classes-and-dissolve-by-attribute"><i class="fa fa-check"></i><b>7.2.5</b> Combine classes and dissolve by attribute</a></li>
<li class="chapter" data-level="7.2.6" data-path="rdemo.html"><a href="rdemo.html#getinat"><i class="fa fa-check"></i><b>7.2.6</b> Calling iNaturalist data from R</a></li>
<li class="chapter" data-level="7.2.7" data-path="rdemo.html"><a href="rdemo.html#adding-basemaps-to-plots"><i class="fa fa-check"></i><b>7.2.7</b> Adding basemaps to plots</a></li>
<li class="chapter" data-level="7.2.8" data-path="rdemo.html"><a href="rdemo.html#interactive-maps-with-leaflet"><i class="fa fa-check"></i><b>7.2.8</b> Interactive maps with <em>leaflet</em></a></li>
<li class="chapter" data-level="7.2.9" data-path="rdemo.html"><a href="rdemo.html#intersecting-points-and-polygons"><i class="fa fa-check"></i><b>7.2.9</b> Intersecting points and polygons</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Minimal Introduction to GIS (in R)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rdemo" class="section level1" number="7">
<h1><span class="header-section-number">7</span> GIS operations in R</h1>
<div id="casestudy" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Case study and demo datasets</h2>
<p>Ok, for demonstrating some of the many GIS operations R can perform we will be using data from one of my favourite study areas, the Cape Peninsula.</p>
<p>The datasets we will use, some of their properties and where to source them are tabled below:</p>
<p><br></p>
<table>
<colgroup>
<col width="9%" />
<col width="6%" />
<col width="7%" />
<col width="8%" />
<col width="10%" />
<col width="57%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Data.model</th>
<th align="left">Geometry.type</th>
<th align="left">File.format</th>
<th align="left">Data.source</th>
<th align="left">URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Localities</td>
<td align="left">Vector</td>
<td align="left">Point</td>
<td align="left"></td>
<td align="left">iNaturalist</td>
<td align="left"><a href="https://www.inaturalist.org/" class="uri">https://www.inaturalist.org/</a></td>
</tr>
<tr class="even">
<td align="left">Watercourses</td>
<td align="left">Vector</td>
<td align="left">Line</td>
<td align="left">ESRI shapefile</td>
<td align="left">City of Cape Town</td>
<td align="left"><a href="https://odp-cctegis.opendata.arcgis.com/datasets/open-watercourse" class="uri">https://odp-cctegis.opendata.arcgis.com/datasets/open-watercourse</a></td>
</tr>
<tr class="odd">
<td align="left">Vegetation Types</td>
<td align="left">Vector</td>
<td align="left">Polygon</td>
<td align="left">ESRI shapefile</td>
<td align="left">City of Cape Town</td>
<td align="left"><a href="https://odp-cctegis.opendata.arcgis.com/datasets/indigenous-vegetation-current-extent" class="uri">https://odp-cctegis.opendata.arcgis.com/datasets/indigenous-vegetation-current-extent</a></td>
</tr>
<tr class="even">
<td align="left">Elevation</td>
<td align="left">Raster</td>
<td align="left">Raster</td>
<td align="left">GeoTIFF</td>
<td align="left">City of Cape Town</td>
<td align="left"><a href="https://odp-cctegis.opendata.arcgis.com/datasets/digital-elevation-model-10m-grid-general-binary-ascii" class="uri">https://odp-cctegis.opendata.arcgis.com/datasets/digital-elevation-model-10m-grid-general-binary-ascii</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>If you’d like to follow along and run the analyses that follow, please follow the links and download the datasets. Please note that the elevation dataset is ~130MB. I’ll also put a copy of all datasets on the Vula site for the course, which I understand is zero-data rated.</p>
<p><br></p>
</div>
<div id="working-with-vector-data" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Working with vector data</h2>
<div id="reading-and-writing" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Reading and writing</h3>
<p><em>sf</em> has a one-size-fits-all approach in that most functions can be applied to most different data types (point, line, polygon, etc) or, in the case of reading and writing, file formats. To read data the function you want is <code>st_read()</code>.</p>
<p>You’ll note that most of the <em>sf</em> functions begin with “st_” - this stands for “spatial and temporal” and is the same in some other GIS like PostGIS.</p>
<p>Let’s try to read in some dat with <code>st_read()</code>:</p>
<blockquote>
<p>Note that if you’re trying any of the read/write code at home, you’ll need to set the file path to where you put the data and want the outputs on your local machine. You can also use <code>?setwd</code> to simplify this.</p>
</blockquote>
<p><br></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="rdemo.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb3-2"><a href="rdemo.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="rdemo.html#cb3-3" aria-hidden="true" tabindex="-1"></a>veg <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;data/cape_peninsula/veg/Vegetation_Indigenous.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `Vegetation_Indigenous&#39; from data source `/home/jasper/GIT/spatial-r/data/cape_peninsula/veg/Vegetation_Indigenous.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 1325 features and 5 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: -63972.95 ymin: -3803535 xmax: 430.8125 ymax: -3705149
## proj4string:   +proj=tmerc +lat_0=0 +lon_0=19 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +units=m +no_defs</code></pre>
<p>This has successfully read in the data and given us a summary of some of its properties. Note the projection (proj4string). This is Transverse Mercator Lo19 (i.e. centred on the 19 degree line of longitude), which has a unit in metres (see the bounding box coordinates). It’s a good projection for most calculations at this scale (and on this line of longitude*).</p>
<blockquote>
<p>*If you’re using Transverse Mercator, always make sure it is set for your closest “odd” line of longitude (i.e. Lo19, Lo21, Lo23)!</p>
</blockquote>
<p><br></p>
<p>Let’s have a closer look at the data:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="rdemo.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(veg)</span></code></pre></div>
<pre><code>## [1] &quot;sf&quot;         &quot;data.frame&quot;</code></pre>
<p>It is an object of two different “classes,” a <code>data.frame</code>, which is an R object class you should be familiar with, and class <code>sf</code>, which is the native class for the <em>sf</em> library.</p>
<p>The nice thing about being both classes is it means you can apply the functions built for either class, e.g.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="rdemo.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(veg)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 5 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: -51324.95 ymin: -3732075 xmax: -35653.98 ymax: -3718136
## proj4string:   +proj=tmerc +lat_0=0 +lon_0=19 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +units=m +no_defs 
##      AREA_HCTR   PRMT_MTR            National_
## 1 1807.5183616 24763.8073 Atlantis Sand Fynbos
## 2    2.1437754   609.5892 Atlantis Sand Fynbos
## 3    0.2134855   185.5566 Atlantis Sand Fynbos
## 4    2.8602421   652.1671 Atlantis Sand Fynbos
## 5    0.5468058   336.8006 Atlantis Sand Fynbos
## 6    0.4172046   259.7772 Atlantis Sand Fynbos
##                        Subtype        Community
## 1 on marine-derived acid sands Need to Find Out
## 2 on marine-derived acid sands Need to Find Out
## 3 on marine-derived acid sands Need to Find Out
## 4 on marine-derived acid sands Need to Find Out
## 5 on marine-derived acid sands Need to Find Out
## 6 on marine-derived acid sands Need to Find Out
##                         geometry
## 1 POLYGON ((-48203.88 -372294...
## 2 POLYGON ((-36676.72 -371974...
## 3 POLYGON ((-35891.46 -371837...
## 4 POLYGON ((-35750.07 -371847...
## 5 POLYGON ((-35823.89 -371817...
## 6 POLYGON ((-35929.18 -371824...</code></pre>
<p>This is a commonly used function for looking at the first few rows of a dataframe. Note there are 5 attribute columns and a 6th <code>geometry</code> column. All <em>sf</em> objects have a geometry column. This is where it stores the geometry - i.e. the point, line, polygon etc - associated with each row of attribute data.</p>
<p><br></p>
<p>To write data with <em>sf</em> you use <code>st_write()</code>, like so:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="rdemo.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(veg, <span class="st">&quot;data/cape_peninsula/veg/Vegetation_Indigenous_duplicate.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Writing layer `Vegetation_Indigenous_duplicate&#39; to data source `data/cape_peninsula/veg/Vegetation_Indigenous_duplicate.shp&#39; using driver `ESRI Shapefile&#39;
## Writing 1325 features with 5 fields and geometry type Polygon.</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="rdemo.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.exists</span>(<span class="st">&quot;data/cape_peninsula/veg/Vegetation_Indigenous_duplicate.shp&quot;</span>) <span class="co"># Just to confirm for you that the file exists</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Note that the function recognised that I wanted to write out an ESRI shapefile from the <code>.shp</code> file extension I provided. You can set the file type using the <code>driver =</code> setting in <code>st_write()</code>. Try <code>st_drivers()</code> for the list of file types supported.</p>
<p><br></p>
</div>
<div id="basic-plotting" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Basic plotting</h3>
<p>As with other data types in R (and perhaps even more so with spatial data), you can really go to town with plotting. I’m only going to show you enough to be able to interrogate your data. Making it look pretty is a week-long course or more in its own right. Check out the <em>“Making maps with R”</em> chapter in Lovelace et al’s online book <a href="https://geocompr.robinlovelace.net/">Geocomputation with R</a> for a good start.</p>
<p><br></p>
<p>The easiest way to plot datasets in R is often a bad thing to do when working with spatial datasets!</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="rdemo.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(veg)</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Fortunately, in this case the dataset isn’t too big, but often you’ll either be overwhelmed with plots or your computer will crash…</p>
<p>Why 5 plots and not one? This is because <em>sf</em> wants to plot the properties of each attribute in the attribute table. Fortunately, there were only 5, but there could have been hundreds! You can select the one you want with indexing like so:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="rdemo.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(veg[<span class="dv">3</span>])</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>These are the National Vegetation Types for the City of Cape Town municipality.</p>
<p>You’ll note that we’re using the base R graphics functions. I mentioned before that <em>sf</em> integrates well with the <a href="https://www.tidyverse.org/"><em>Tidyverse</em></a>, so this could also be plotted like so:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="rdemo.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co">#calls ggplot2 and other Tidyverse packages together</span></span>
<span id="cb15-2"><a href="rdemo.html#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="rdemo.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb15-4"><a href="rdemo.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>veg, <span class="fu">aes</span>(<span class="at">fill =</span> <span class="st">`</span><span class="at">National_</span><span class="st">`</span>))</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>That’s better for the legend, but now we’ve squashed the map. Let’s narrow in on the Cape Peninsula for convenience.</p>
<p><br></p>
</div>
<div id="cropping" class="section level3" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Cropping</h3>
<p>Here we’ll apply the function <code>st_crop</code>. To use the function you need an object to crop, and an extent or bounding box to crop to. <strong><em>sf</em></strong> is clever, and you can set the extent by giving it another object who’s extent you’d like to match (check the bounding box given when we read in the data earlier).</p>
<p>We don’t have a second object in this case, so we have to provide a “numeric vector with named elements xmin, ymin, xmax and ymax,” like so:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="rdemo.html#cb16-1" aria-hidden="true" tabindex="-1"></a>ext <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">66642.18</span>, <span class="sc">-</span><span class="fl">3809853.29</span>, <span class="sc">-</span><span class="fl">44412.18</span>, <span class="sc">-</span><span class="fl">3750723.29</span>) <span class="co">#Coordinates in metres according to TM Lo19</span></span>
<span id="cb16-2"><a href="rdemo.html#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="rdemo.html#cb16-3" aria-hidden="true" tabindex="-1"></a>ext</span></code></pre></div>
<pre><code>## [1]   -66642.18 -3809853.29   -44412.18 -3750723.29</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="rdemo.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ext) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;xmin&quot;</span>, <span class="st">&quot;ymin&quot;</span>, <span class="st">&quot;xmax&quot;</span>, <span class="st">&quot;ymax&quot;</span>) <span class="co">#Give it names</span></span>
<span id="cb18-2"><a href="rdemo.html#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="rdemo.html#cb18-3" aria-hidden="true" tabindex="-1"></a>ext</span></code></pre></div>
<pre><code>##        xmin        ymin        xmax        ymax 
##   -66642.18 -3809853.29   -44412.18 -3750723.29</code></pre>
<p>Now we can feed that into <code>st_crop</code></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="rdemo.html#cb20-1" aria-hidden="true" tabindex="-1"></a>veg <span class="ot">&lt;-</span> <span class="fu">st_crop</span>(veg, ext) <span class="co">#Note that I&#39;m overwriting the old data object</span></span></code></pre></div>
<pre><code>## Warning: attribute variables are assumed to be spatially constant
## throughout all geometries</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="rdemo.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data=</span>veg, <span class="fu">aes</span>(<span class="at">fill =</span> <span class="st">`</span><span class="at">National_</span><span class="st">`</span>))</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Better?</p>
<p>But what about the silly splits like <em>Peninsula Granite Fynbos - North/South</em> and <em>Cape Flats Dune Strandveld - West Coast/False Bay</em>.</p>
<p>Which ones do I mean?</p>
<p><br></p>
</div>
<div id="select-and-subset-by-attribute" class="section level3" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> Select and subset by attribute</h3>
<p>Let’s select them from the attribute table and plot them.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="rdemo.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Get a list of the veg types we want</span></span>
<span id="cb23-2"><a href="rdemo.html#cb23-2" aria-hidden="true" tabindex="-1"></a>split_veg <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Peninsula Granite Fynbos - North&quot;</span>, </span>
<span id="cb23-3"><a href="rdemo.html#cb23-3" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Peninsula Granite Fynbos - South&quot;</span>, </span>
<span id="cb23-4"><a href="rdemo.html#cb23-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Cape Flats Dune Strandveld - West Coast&quot;</span>, </span>
<span id="cb23-5"><a href="rdemo.html#cb23-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Cape Flats Dune Strandveld - False Bay&quot;</span>)</span>
<span id="cb23-6"><a href="rdemo.html#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="rdemo.html#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Use base R indexing to select attributes</span></span>
<span id="cb23-8"><a href="rdemo.html#cb23-8" aria-hidden="true" tabindex="-1"></a>vegsub <span class="ot">&lt;-</span> veg[<span class="fu">which</span>(veg<span class="sc">$</span>National_ <span class="sc">%in%</span> split_veg),]</span>
<span id="cb23-9"><a href="rdemo.html#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="rdemo.html#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot</span></span>
<span id="cb23-11"><a href="rdemo.html#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data=</span>vegsub, <span class="fu">aes</span>(<span class="at">fill =</span> <span class="st">`</span><span class="at">National_</span><span class="st">`</span>))</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Or tidyverse…</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="rdemo.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Using tidyverse piping to filter and plot</span></span>
<span id="cb24-2"><a href="rdemo.html#cb24-2" aria-hidden="true" tabindex="-1"></a>veg <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="rdemo.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(National_ <span class="sc">%in%</span> split_veg) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="rdemo.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-5"><a href="rdemo.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="st">`</span><span class="at">National_</span><span class="st">`</span>))</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Ok. What if we decided we don’t want them split?</p>
</div>
<div id="combine-classes-and-dissolve-by-attribute" class="section level3" number="7.2.5">
<h3><span class="header-section-number">7.2.5</span> Combine classes and dissolve by attribute</h3>
<p>We can just rename them in appropriate column in the attribute table…</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="rdemo.html#cb25-1" aria-hidden="true" tabindex="-1"></a>vegsub<span class="sc">$</span>National_ <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(vegsub<span class="sc">$</span>National_, <span class="fu">c</span>(<span class="st">&quot;Peninsula Granite Fynbos - North&quot;</span> <span class="ot">=</span> <span class="st">&quot;Peninsula Granite Fynbos&quot;</span>, </span>
<span id="cb25-2"><a href="rdemo.html#cb25-2" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Peninsula Granite Fynbos - South&quot;</span> <span class="ot">=</span> <span class="st">&quot;Peninsula Granite Fynbos&quot;</span>, </span>
<span id="cb25-3"><a href="rdemo.html#cb25-3" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Cape Flats Dune Strandveld - West Coast&quot;</span> <span class="ot">=</span> <span class="st">&quot;Cape Flats Dune Strandveld&quot;</span>, </span>
<span id="cb25-4"><a href="rdemo.html#cb25-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Cape Flats Dune Strandveld - False Bay&quot;</span> <span class="ot">=</span> <span class="st">&quot;Cape Flats Dune Strandveld&quot;</span>))</span>
<span id="cb25-5"><a href="rdemo.html#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="rdemo.html#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data=</span>vegsub, <span class="fu">aes</span>(<span class="at">fill =</span> <span class="st">`</span><span class="at">National_</span><span class="st">`</span>))</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>But from the polygon boundaries we see that there are a number of adjacent polygons (i.e. they have shared boundaries) that are of the same veg type. We can “dissolve” these boundaries like so:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="rdemo.html#cb26-1" aria-hidden="true" tabindex="-1"></a>vs_dissolve <span class="ot">&lt;-</span> vegsub <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(National_) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>() </span>
<span id="cb26-2"><a href="rdemo.html#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="rdemo.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#plot dissolved</span></span>
<span id="cb26-4"><a href="rdemo.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data=</span>vs_dissolve, <span class="fu">aes</span>(<span class="at">fill =</span> National_))</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>Ok… I think we’ve flogged that horse as far as it’ll go for now. Let’s bring in another dataset. How about points?</p>
</div>
<div id="getinat" class="section level3" number="7.2.6">
<h3><span class="header-section-number">7.2.6</span> Calling iNaturalist data from R</h3>
<p>A very cool feature of <a href="https://www.inaturalist.org/">iNaturalist</a> is that the team at <a href="https://ropensci.org/">rOpenSci</a> have built a great R package for interfacing with it directly, called <a href="https://docs.ropensci.org/rinat/"><em>rinat!</em></a></p>
<p>Let’s get all the records we can for the King Protea (<em>Protea cynaroides</em>).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="rdemo.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rinat)</span>
<span id="cb27-2"><a href="rdemo.html#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="rdemo.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Call the data directly from iNat</span></span>
<span id="cb27-4"><a href="rdemo.html#cb27-4" aria-hidden="true" tabindex="-1"></a>pc <span class="ot">&lt;-</span> <span class="fu">get_inat_obs</span>(<span class="at">taxon_name =</span> <span class="st">&quot;Protea cynaroides&quot;</span>,</span>
<span id="cb27-5"><a href="rdemo.html#cb27-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">bounds =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">34.5</span>, <span class="dv">18</span>, <span class="sc">-</span><span class="fl">33.5</span>, <span class="fl">18.5</span>),</span>
<span id="cb27-6"><a href="rdemo.html#cb27-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">maxresults =</span> <span class="dv">1000</span>)</span>
<span id="cb27-7"><a href="rdemo.html#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="rdemo.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Filter returned observations by a range of attribute criteria</span></span>
<span id="cb27-9"><a href="rdemo.html#cb27-9" aria-hidden="true" tabindex="-1"></a>pc <span class="ot">&lt;-</span> pc <span class="sc">%&gt;%</span> <span class="fu">filter</span>(positional_accuracy<span class="sc">&lt;</span><span class="dv">46</span> <span class="sc">&amp;</span> </span>
<span id="cb27-10"><a href="rdemo.html#cb27-10" aria-hidden="true" tabindex="-1"></a>                latitude<span class="sc">&lt;</span><span class="dv">0</span> <span class="sc">&amp;</span></span>
<span id="cb27-11"><a href="rdemo.html#cb27-11" aria-hidden="true" tabindex="-1"></a>                <span class="sc">!</span><span class="fu">is.na</span>(latitude) <span class="sc">&amp;</span></span>
<span id="cb27-12"><a href="rdemo.html#cb27-12" aria-hidden="true" tabindex="-1"></a>                captive_cultivated <span class="sc">==</span> <span class="st">&quot;false&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb27-13"><a href="rdemo.html#cb27-13" aria-hidden="true" tabindex="-1"></a>                quality_grade <span class="sc">==</span> <span class="st">&quot;research&quot;</span>)</span>
<span id="cb27-14"><a href="rdemo.html#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="rdemo.html#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Make the dataframe a spatial object of class = &quot;sf&quot;</span></span>
<span id="cb27-16"><a href="rdemo.html#cb27-16" aria-hidden="true" tabindex="-1"></a>pc <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(pc, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>), <span class="at">crs =</span> <span class="dv">4326</span>) <span class="co">#Note that I had to define the CRS!!!</span></span>
<span id="cb27-17"><a href="rdemo.html#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="rdemo.html#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot</span></span>
<span id="cb27-19"><a href="rdemo.html#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data=</span>pc)</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p><br></p>
<p>Great! We got lots of points, but without a base layer its very difficult to tell where exactly these are?</p>
<p><br></p>
</div>
<div id="adding-basemaps-to-plots" class="section level3" number="7.2.7">
<h3><span class="header-section-number">7.2.7</span> Adding basemaps to plots</h3>
<p>Let’s pull up a base layer from Open Street Maps and plot our points on that.</p>
<p><br></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="rdemo.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rosm)</span>
<span id="cb28-2"><a href="rdemo.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggspatial)</span>
<span id="cb28-3"><a href="rdemo.html#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="rdemo.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb28-5"><a href="rdemo.html#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotation_map_tile</span>(<span class="at">type =</span> <span class="st">&quot;osm&quot;</span>, <span class="at">progress =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span> </span>
<span id="cb28-6"><a href="rdemo.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>pc)</span></code></pre></div>
<p><img src="spatial-r_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p><br></p>
<p>Note that there are quite a few base layer options that can be set with <code>type = ""</code>. Try <code>rosm::osm.types()</code> to see them all.</p>
<p>This is better than nothing, but the scale of the map is too small to really see where the plants actually are. It would be much easier if we could look at the data interactively?</p>
<p><br></p>
</div>
<div id="interactive-maps-with-leaflet" class="section level3" number="7.2.8">
<h3><span class="header-section-number">7.2.8</span> Interactive maps with <em>leaflet</em></h3>
<p>We can generate interactive maps by calling the <a href="https://leafletjs.com/">leaflet</a> mapserver using wrapper functions in the <a href="https://rstudio.github.io/leaflet/">leaflet R package</a> written for this purpose.</p>
<p><br></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="rdemo.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb29-2"><a href="rdemo.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmltools)</span>
<span id="cb29-3"><a href="rdemo.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="rdemo.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>(<span class="at">group =</span> <span class="st">&quot;Default&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># Add default OpenStreetMap map tiles</span></span>
<span id="cb29-5"><a href="rdemo.html#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="rdemo.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  addPolygons(data=layer, color = &quot;#999999&quot;, weight = 1, smoothFactor = 0.5, opacity = 0.75, fillOpacity = 0.15, highlightOptions = highlightOptions(color = &quot;white&quot;, weight = 2, bringToFront = F), label=~layer$QUARTERN, group = &quot;Quaternaries&quot;) %&gt;%</span></span>
<span id="cb29-7"><a href="rdemo.html#cb29-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-8"><a href="rdemo.html#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="at">data =</span> pc,</span>
<span id="cb29-9"><a href="rdemo.html#cb29-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">group =</span> <span class="st">&quot;Protea cynaroides&quot;</span>,</span>
<span id="cb29-10"><a href="rdemo.html#cb29-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">radius =</span> <span class="dv">3</span>, </span>
<span id="cb29-11"><a href="rdemo.html#cb29-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> <span class="st">&quot;green&quot;</span>) </span></code></pre></div>
<div id="htmlwidget-67264550f88241ad2e7e" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-67264550f88241ad2e7e">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,"Default",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[-33.9892089857,-34.08221436,-34.0812233,-34.07440085,-34.0744004333,-33.9845895117,-33.9942058207,-33.9950138955,-33.9992747757,-34.0703933333,-34.27298777,-34.06625416,-34.214725,-34.24515744,-34.24523087,-34.2294383333,-34.2451333333,-34.0756972162,-34.07049724,-34.11478,-34.054175,-34.0761779,-34.0944163844,-34.0904805,-34.0619394341,-34.0738966074,-33.9851012794,-34.1518083333,-34.1509694444,-34.0752359852,-34.0752359852,-34.0752359852,-34.0752359852,-34.29155837,-34.0905474951,-33.977218939,-33.9717771522,-33.9684166309,-33.9683926876,-33.9675386398,-33.9600697594,-34.0905519901,-33.9638902702,-33.9655283355,-33.965179356,-33.9651551546,-33.9658799313,-33.9669072865,-33.9701094372,-33.9720072837,-33.9740913141,-33.98853,-34.0772226267,-33.9915116667,-34.0702116667,-34.0116110188,-34.0689278333,-34.00183055,-34.0741111418,-34.0743864821,-34.0741583333,-34.0740971667,-34.0742028333,-34.0742721667,-33.987975,-34.0751721667,-34.0739404631,-34.0379835852,-34.1040017176,-34.1055377852,-33.9882666667,-33.98543,-34.1055662758,-34.06176576,-34.0381154797,-33.9638633333,-34.06534447,-34.07391625,-34.0773249697,-34.1017883333,-34.1782216667,-34.1514416971,-34.0712383333,-34.0745055,-33.9905005098,-33.9955423519,-33.9955940377,-34.0740307834,-34.073982465,-33.9851493482,-33.9665183333,-34.0740937041,-33.9357719026,-33.9344391965,-34.0760411902,-34.081553442,-33.98310156,-34.1011404,-34.057335,-34.0943614268,-33.97517,-34.2357378144,-34.1110783143,-34.1116568283,-34.1121533482,-34.0768427588,-34.0331388889,-34.2357556382,-33.9897607779,-34.1109862318,-33.9608460938,-33.9587812768,-34.1080583749,-34.1115857708,-34.1476971667,-34.1111,-34.1039888889,-33.96873333,-34.1114195,-33.9631282541,-33.9654799484,-33.9704585517,-33.9665845604,-33.9612005157,-33.9589419034,-33.95421,-33.95414,-34.1013555,-33.989298935,-33.9948906704,-33.9961412627,-33.9898200095,-33.989832519,-33.9897649675,-33.9864721122,-33.9864740582,-33.9876708431,-33.9865118663,-33.9897071456,-33.9861101545,-34.0575,-33.91417,-34.1171563889,-34.1173141667,-34.1174033333,-34.1178411111,-34.0943870542,-34.00219996,-34.188713,-33.9775918732,-34.0760583333,-34.06631855,-34.0664597222,-34.06708491,-34.07043567,-34.0767777,-34.07658834,-34.0766467899,-33.9956385,-34.0939656572,-34.0917799788,-34.07691001,-34.0769888601,-34.0691651451,-33.975155,-33.9721260069,-33.9751362983,-33.969630734,-33.9718855507,-33.95427,-33.9745178199,-33.9772,-33.97173,-33.9722491066,-33.95792,-33.9692288677,-33.9774283333,-34.19392666,-34.19366198,-34.0995800213,-33.98725576,-33.9803437201,-33.99276674,-33.9542716667,-33.98877929,-33.99184378,-33.9931661401,-34.0713222222,-34.0691547222,-34.0697119444,-34.2649493599,-34.11767676,-34.11717773,-34.1159971701,-34.11900534,-34.11967168,-34.12022547,-34.2639541,-34.0743445,-34.07515,-33.9652862547,-33.9590625684,-33.96904034,-33.96969273,-33.97234068,-33.99688448,-34.00388382,-33.995095,-34.08884194,-34.18199252,-34.26501167,-34.1743002401,-33.9662133333,-33.978875,-34.10600021,-34.10392163,-34.05452728,-34.2733433699,-33.99285833,-33.99363333,-33.99364167,-34.05730371,-33.99521812,-33.985169,-34.1478278599,-34.2135107744,-34.2313374706,-34.0921118133,-34.0901659866,-34.0897906633,-34.27092193,-34.0010383333,-34.2316058942,-34.19019536,-33.9343944444,-34.18880325,-34.1458835552,-34.2166856397,-34.1459625203,-34.18896996,-34.1897803,-34.19107104,-33.9791835499,-33.9803060099,-34.10080705,-34.0653722081,-34.0690993052,-33.95447167,-33.99246667,-34.0937367778,-34.0955639499,-34.07746679,-34.2554158023,-33.9741042681,-34.09072824,-33.92766667,-34.11285629,-34.11323276,-33.985220833,-34.11087966,-34.1138396799,-34.1163085399,-34.11775173,-34.11851434,-34.0934121399,-34.0986554,-34.09550892,-34.09293285,-34.09322519,-34.09323697,-34.11245484,-34.11399507,-34.11672418,-34.09866125,-34.21643833,-34.2094054748,-34.0738001503,-34.1458618222,-34.1889818015,-34.2466291779,-34.2428305879,-34.2157156812,-33.9966917498,-34.0332941135,-34.2113219855,-34.245623569,-34.0097678843,-34.0432539163,-33.9774567381,-34.0240970836,-34.0240970836,-33.9685036256,-34.1606095779,-33.97333627,-34.0761413572,-33.96796667,-33.9682311966,-33.9696897158,-34.1034794444,-34.0872004311,-34.2755195145,-34.228425,-33.986704564,-34.1003734422,-33.9954527778,-33.9950744444,-34.05427669,-33.9788861111,-33.9736555556,-34.06375833,-34.1531,-34.0009166667,-33.96795,-33.97178667,-34.0993917547,-33.9893311881,-34.26703333,-34.0637854324,-33.973946,-34.07364462,-34.0760814,-34.07371645,-33.9955780702,-34.0807483531,-34.2669869567,-34.1110037399,-34.10862458,-34.0538833333,-34.0542333333,-34.0034395,-34.0871921,-34.08712937,-34.0943806606,-33.9846317237,-34.09511751,-34.0952303889,-34.09329431,-33.9979885699,-34.27205837,-34.27296496,-34.1018551,-34.09401071,-34.07453725,-33.9662224241,-33.9717722222,-34.01314445,-34.0701528333,-34.06626899,-33.9650624138,-33.9925256279,-34.0869836241,-34.0871239638,-34.0870717357,-34.0871449893,-34.07695474,-34.11247062,-34.1129171699,-34.10737007,-34.08820221,-34.1124966667,-34.0904848043,-33.9606891406,-34.0662046569,-34.08733309,-33.9589141516,-33.9661905888,-34.0840522433,-33.9773166667,-34.11702348,-33.98797017,-33.98680607,-33.9860735,-33.98595724,-33.9804771371,-33.9838728364,-33.99332489,-34.0742111667,-34.0742388333,-33.9676836697,-34.10900337,-33.965070583,-33.9892166667,-34.0742702944,-34.0881805,-34.1180322867,-34.2744149033,-34.2759615198,-34.2744392744,-34.10473622,-34.1025526,-34.0984637,-34.09942552,-34.10094014,-34.10056748,-33.9621886944,-33.9631538333,-33.9652290278,-33.9698638889,-33.9698905833,-33.9723129167,-34.263611,-33.9722175556,-33.9680023056,-33.9631728889,-33.9675025833,-33.9602928056,-33.9576110833,-34.1184638768,-34.2625483917,-34.0330723767,-34.1239171056,-34.0742388333,-34.1936419894,-34.1936641878,-34.2672424167,-34.2644195556,-34.26335525,-34.27294491,-33.9851887506,-33.9867473875,-34.2147666667,-34.0736268321,-34.0736268321,-33.9398111111,-34.0777529916,-34.1024138889,-34.1033861111,-34.0811417951,-33.9913793654,-34.0740097175,-34.105075,-34.0778907257,-34.0812105526,-34.0761204354,-34.0812100618,-33.9649799533,-33.98973,-33.988139498,-34.0743057604,-33.9881356758,-34.0749401924,-33.9611769519,-33.9900955167,-34.0337028333,-34.0742388333,-34.1954288353,-33.976740581,-33.9887055724,-34.0768613915,-33.9737468868,-33.98618614,-34.074075,-33.9781927744,-34.0465229843,-34.0464861878,-33.97916528,-33.9877472319,-33.966319114,-34.0812611111,-34.0812611111,-34.0743852638,-33.9604375349,-34.088158623,-33.94001378,-34.10709936,-33.9850357944,-33.9662027778,-34.0909,-34.0957783,-34.09313848,-34.00079115,-34.00289283,-34.00299953,-33.9957251001,-34.09513857,-34.0702095,-33.98406416,-34.0004348611,-34.08853661,-33.9719330977,-34.1974769586,-34.09227175,-34.09476352,-34.0016205423,-34.07553219,-34.28459724,-34.26528433,-33.97187409,-33.9940719444,-33.9819241801,-33.9602666667,-33.9601283333,-34.087408514,-34.08340968,-34.09189005,-34.1035988889,-34.0814975,-34.099,-34.1014,-33.9845283333,-34.05449,-33.9767,-33.9728,-33.98463,-33.9897916667,-34.0543778056,-34.0572974,-33.9889,-34.11752938,-34.11480914,-34.0946472222,-34.1173,-33.98465,-33.98493655,-33.98455,-33.97327323,-34.05462,-33.983893,-33.988685,-33.9875,-34.0017404167,-34.1146053,-34.09578855,-34.09826223,-33.9952659,-33.99269629,-34.0539344,-34.0742163889,-34.08932277,-34.0735,-33.9906,-33.98446874,-33.9753226389,-33.9779267399,-34.02319502,-34.24767481,-34.0788194444,-34.11398282,-34.17937,-34.07559781,-34.1738,-33.95431354,-33.9548795556,-34.0098129297,-34.2184096667,-34.2147161667,-34.00389354,-33.98944,-33.9588544,-33.9235,-34.1115,-34.15951,-34.0564,-34.0975,-34.242995,-34.220118,-33.9807,-34.12504,-34.0593,-33.9964,-33.9573704,-34.06215,-33.9698633333,-34.0672443062,-33.9750543301,-34.0934238719,-33.9788655845],[18.4060317278,18.40494154,18.3974062167,18.39796245,18.3979771333,18.3820824733,18.3764628615,18.374864507,18.3680235241,18.3870166667,18.3975904799,18.3884844,18.4490916667,18.46660882,18.46657506,18.4572866667,18.46652,18.3991550097,18.38704995,18.4428633333,18.38513,18.40798205,18.4312560724,18.4207866667,18.3893214302,18.4032092433,18.4193626419,18.3838583333,18.3830166667,18.4005457779,18.4005457779,18.4005457779,18.4005457779,18.44349462,18.4206138723,18.4200047052,18.4215741037,18.4251564809,18.4252206907,18.4262221544,18.4060995375,18.4208871424,18.4067733068,18.4079799704,18.4066243363,18.4065742592,18.4069487378,18.4071550339,18.4123737246,18.4147814909,18.4100580038,18.4270583333,18.4063471388,18.429875,18.3869966667,18.4735748439,18.3937033333,18.405575,18.4038118031,18.3977679936,18.3971366667,18.3972783333,18.3974283333,18.397625,18.4325666667,18.4000966667,18.4031412254,18.3783842717,18.4297731332,18.4329023492,18.4142216667,18.4195533333,18.4325067365,18.38920343,18.3782623295,18.4067833333,18.38855289,18.40314969,18.4063796606,18.411815,18.389945,18.3836288285,18.3860966667,18.3985333333,18.429364139,18.4174744536,18.4174111672,18.3968168028,18.3967682153,18.419434391,18.4119266667,18.3971654345,18.4769386053,18.4776560962,18.3881811032,18.3986441816,18.3910297,18.45814772,18.3904066667,18.4308600043,18.42067,18.4086316738,18.4590729757,18.4600120771,18.4620687754,18.3897849173,18.4594694444,18.4086627234,18.4276228398,18.4590570722,18.4066954693,18.4030533998,18.4569634303,18.4613386754,18.429205,18.459075,18.4297305556,18.4244133301,18.42712,18.4067100974,18.406732269,18.4133466392,18.4117770902,18.406754451,18.4030272582,18.43842,18.43801,18.4544633333,18.4060024749,18.4089151025,18.4103722125,18.4071230516,18.4070935473,18.4069751948,18.4016945958,18.4016982839,18.402662538,18.4018914029,18.4069208801,18.402553238,18.3905555556,18.3901133333,18.43907,18.4391986111,18.4394983333,18.4401369444,18.4312152861,18.37336702,18.389386,18.418807741,18.3880416667,18.38077233,18.3807364722,18.3811966299,18.3816000401,18.38351028,18.3826970501,18.38101193,18.41812131,18.4306675857,18.4300453132,18.37879753,18.37741298,18.393798843,18.4207166667,18.3981971739,18.4207020508,18.4135618755,18.3979472145,18.4391283333,18.4072843653,18.4199633333,18.42153,18.3944817881,18.43388,18.3967130613,18.4191633333,18.40257319,18.40327239,18.4571003273,18.39317,18.38630324,18.37861364,18.4391716667,18.39223471,18.3997874,18.40249406,18.3967283333,18.3938477778,18.3958205556,18.431908719,18.43978143,18.43911032,18.43432524,18.43800908,18.43854711,18.44089299,18.3965714101,18.3979083333,18.400095,18.4081897733,18.4063188553,18.3964534799,18.3991826,18.39851113,18.41245487,18.40832849,18.4181283333,18.43006491,18.37159388,18.43182,18.3604926,18.4235283333,18.4163283333,18.43959238,18.44046227,18.3856979,18.45146388,18.375795,18.37724167,18.37722,18.39028956,18.41886032,18.419691,18.42780317,18.3927411509,18.4118983632,18.4021686517,18.4048830283,18.4137552076,18.39142459,18.4060416667,18.4115121814,18.37813668,18.4776055556,18.3746745,18.33278732,18.4514801707,18.3327823816,18.37624462,18.3774580301,18.37923048,18.38809699,18.38633962,18.45889001,18.3885758277,18.3938131761,18.4357,18.42848833,18.4366806667,18.43373022,18.40660038,18.4700474401,18.403166888,18.41833037,18.395805,18.43529304,18.43424869,18.4196422844,18.42972234,18.43407666,18.43811106,18.43987661,18.44158387,18.4464909801,18.44247645,18.43357282,18.43700597,18.43836743,18.44002421,18.43999244,18.4397778201,18.44451447,18.45195675,18.45107833,18.4449576214,18.3966377144,18.3326640073,18.3746957219,18.4112220896,18.4075034387,18.3980331291,18.4767234931,18.4596856772,18.4610983634,18.4098713938,18.3873320371,18.4527527913,18.4794603863,18.4794044502,18.4794044502,18.3948516198,18.3821097263,18.41926509,18.3871994017,18.42606167,18.4115501705,18.416120546,18.4447,18.4195229188,18.4336520506,18.45620333,18.4651357626,18.4589290591,18.4184808333,18.41892,18.42788384,18.4165166667,18.4208611111,18.38577,18.39021333,18.4066777778,18.42601333,18.39207,18.431467535,18.4274773714,18.42578,18.3857645977,18.42097374,18.38191886,18.38737742,18.3820231701,18.4181965515,18.3942404561,18.425768615,18.4611049901,18.4602107999,18.3857416667,18.3854305556,18.40804749,18.41583522,18.41239337,18.431122963,18.4192251787,18.42883625,18.4306667222,18.42717028,18.4090353201,18.4528817,18.45053066,18.45253156,18.44081614,18.39869314,18.423482012,18.392,18.4059666667,18.3869033333,18.38844591,18.4159567452,18.4279720178,18.4198842147,18.4196059074,18.4196992572,18.4194997186,18.40762286,18.44009427,18.4352187,18.43662827,18.3599882899,18.4399433333,18.4209540911,18.4327532217,18.3855347056,18.4195732,18.4053989457,18.4235028976,18.4023172036,18.41923,18.44928759,18.41428454,18.4142923999,18.4157271389,18.4162294799,18.3925752857,18.3896672869,18.40269571,18.397495,18.3976033333,18.4124828172,18.4482847299,18.4081113618,18.4271616667,18.3975337725,18.36002,18.4410357684,18.4224207604,18.4286464878,18.4223145088,18.44558728,18.44638264,18.45513678,18.45672763,18.45764112,18.45333028,18.4072208333,18.4066238333,18.4070815833,18.4021930556,18.4017944167,18.3984203333,18.434167,18.4147033611,18.4261779722,18.4294566944,18.4262180278,18.43105125,18.4336814722,18.4415956533,18.4313848056,18.4594433941,18.4341068917,18.3975966667,18.3830529341,18.3829512877,18.4258384444,18.4341564167,18.4405994167,18.45226756,18.4196823624,18.4321528282,18.449145,18.3818517812,18.3818517812,18.3944333333,18.3886083495,18.4362611111,18.4405833333,18.3973401133,18.4097683802,18.3971383609,18.4460833333,18.3886606699,18.3973874912,18.3849168609,18.3974271289,18.4106331093,18.4270466667,18.43038833,18.397675262,18.4142431247,18.4002253355,18.4084510803,18.430375968,18.4431366667,18.3974883333,18.4157408215,18.4206651896,18.4287587567,18.3898464867,18.4206612485,18.41555676,18.3971666667,18.4183935173,18.4343711101,18.434321573,18.444958858,18.433098064,18.4235963129,18.3974638889,18.3974638889,18.3937001247,18.4107766865,18.3599530533,18.39439605,18.45141186,18.4191766451,18.4234972222,18.40397,18.44483991,18.43862861,18.40650271,18.3613151099,18.35949621,18.41701951,18.42822636,18.3968505833,18.41808693,18.3661536944,18.4106818799,18.3981109212,18.4031065131,18.40192784,18.40500981,18.4056928475,18.38527855,18.43696611,18.43079798,18.39333387,18.3765277778,18.38126218,18.4061783333,18.4061966667,18.4204345521,18.3960557201,18.40243386,18.4343675,18.3981944444,18.4282,18.4293,18.4187936111,18.42812,18.4199,18.4195,18.41927,18.4268083333,18.3850808889,18.39026894,18.42658,18.4457337901,18.43512565,18.4045305556,18.4397,18.41903,18.4155394199,18.41918,18.41894059,18.42834,18.416753,18.426428,18.4296,18.4055591667,18.44097575,18.43447929,18.44069905,18.3767125,18.37864871,18.4277737,18.3974497222,18.3601510101,18.40262,18.4258,18.41818371,18.42066475,18.41878503,18.40135299,18.38678938,18.3884194444,18.44431604,18.3786,18.38533404,18.3808,18.43901146,18.4406760833,18.4505760748,18.4530072222,18.4490681667,18.40517566,18.43028,18.4048623,18.422,18.4314,18.375313,18.3861,18.4317,18.465332,18.45336,18.3814,18.44548,18.3908,18.4187,18.4035305,18.39573,18.4007416667,18.3911147062,18.42070831,18.4223341942,18.4165343032],3,null,"Protea cynaroides",{"interactive":true,"className":"","stroke":true,"color":"green","weight":5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-34.29155837,-33.91417],"lng":[18.3326640073,18.4794603863]}},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<p>Much better!</p>
<p>Strange, but even though we filtered our iNaturalist records for <code>captive_cultivated == "false"</code> we still have a number of observations that appear to be in people’s gardens. <strong><em>Let this serve as a warning to be wary of all data! Always do “common-sense-checks” on your data and the outputs of your analyses!!!</em></strong></p>
<p><br></p>
</div>
<div id="intersecting-points-and-polygons" class="section level3" number="7.2.9">
<h3><span class="header-section-number">7.2.9</span> Intersecting points and polygons</h3>
<p>One way to drastically reduce the number of cultivated records is to overlay the localities (points) with the <em>remaining extent</em> of the vegetation types.</p>
<p><br></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="rdemo.html#cb30-1" aria-hidden="true" tabindex="-1"></a>vegr <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;data/cape_peninsula/veg/Vegetation_Indigenous_Remnants.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `Vegetation_Indigenous_Remnants&#39; from data source `/home/jasper/GIT/spatial-r/data/cape_peninsula/veg/Vegetation_Indigenous_Remnants.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 3428 features and 7 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: -63951.23 ymin: -3803532 xmax: 420.7595 ymax: -3705506
## proj4string:   +proj=tmerc +lat_0=0 +lon_0=19 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +units=m +no_defs</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="rdemo.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#st_join</span></span>
<span id="cb32-2"><a href="rdemo.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">#st_intersects</span></span>
<span id="cb32-3"><a href="rdemo.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">#st_intersection</span></span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-as-a-gis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jslingsby/spatial-r/edit/master/06-rdemo.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/jslingsby/spatial-r/blob/master/06-rdemo.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
